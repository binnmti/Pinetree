@page "/"
@using Pinetree.Client.Services

@rendermode InteractiveAuto

<PageTitle>Pinetree</PageTitle>
<HeadContent>
    <meta property="og:title" content=@Title />
    <meta name="twitter:title" content=@Title />
    <meta name="description" content=@Description />
    <meta property="og:description" content=@Description />
    <meta name="twitter:description" content=@Description />
    <meta property="og:url" content=@Url />
    <link rel="canonical" href=@Url />
</HeadContent>

<div class="position-relative">
    <!-- Main Content - Centered -->
    <div style="display: flex; justify-content: center; align-items: center; text-align: center; flex-direction: column;">
        
        <h1 style="font-size: 4em; margin-top: 50px;">
            <img src="pinetree.png" alt="Bootstrap" width="64" height="64">
            Pinetree is browser-based <span class="highlight-text">hierarchical</span> markdown editor
        </h1>
        <div class="mt-4">
            <a class="btn btn-outline-primary btn-lg m-2" href="/play"><i class="bi bi-tools"></i>Playground</a>
            <a class="btn btn-outline-success btn-lg m-2" href="Account/Register"><i class="bi bi-person"></i>Register</a>
        </div>
        <img src="PinetreeScreen.png" alt="Pinetree Image" class="mt-4" />

        <!-- Hierarchical emphasis section -->
        <div class="hierarchical-emphasis my-5 py-4">
            <h2 class="mb-4">Experience the power of <span class="highlight-text">hierarchical</span> markdown editing</h2>

            <div class="concept-box">
                <div class="concept-icon">
                    <i class="bi bi-file-earmark-text"></i>
                </div>
                <div class="concept-content">
                    <p class="mb-0">
                        Inspired by Amazon's "One-Pager" culture, Pinetree helps you create concise documents that everyone actually wants to read.
                        While a one-page summary is ideal, sometimes details matter too.
                    </p>
                </div>
            </div>

            <div class="concept-box">
                <div class="concept-icon">
                    <i class="bi bi-diagram-3"></i>
                </div>
                <div class="concept-content">
                    <p class="mb-0">
                        Traditional file systems fail to connect overview documents with their detailed counterparts.
                        <span class="highlight-text">Hierarchical text</span> solves this by creating natural connections between summaries and details.
                    </p>
                </div>
            </div>

            <div class="concept-box">
                <div class="concept-icon">
                    <i class="bi bi-layout-text-window"></i>
                </div>
                <div class="concept-content">
                    <p class="mb-0">
                        Use Pinetree for travel plans, resumes, book notes - anything that benefits from both brevity at the top level
                        and depth in the details. Keep each level concise while allowing readers to explore deeper when needed.
                    </p>
                </div>
            </div>
        </div>


        <!-- Video section -->
        <div class="video-container my-5 pt-4">
            <h2>See Pinetree in Action</h2>
            <video controls preload="metadata" width="960" height="576">
                <source src="PlayPinetree.mp4" type="video/mp4">
            </video>
            <p class="video-description">
                Watch how Pinetree helps you organize your thoughts hierarchically and efficiently.
                This short demonstration shows the key features of our markdown editor in action.
            </p>
        </div>
    </div>
</div>

<!-- Call to action - Full width with distinct background -->
<div class="cta-container">
    <div class="cta-section">
        <h2>Ready to get started?</h2>
        <p>Join our community of organized writers and thinkers today!</p>
        <div class="mt-4">
            <a class="btn btn-primary btn-lg m-2" href="/play"><i class="bi bi-tools"></i>Playground</a>
            <a class="btn btn-success btn-lg m-2" href="Account/Register"><i class="bi bi-person"></i>Register</a>
            <a class="btn btn-info btn-lg m-2" href="/Pricing"><i class="bi bi-tag"></i>Pricing</a>
        </div>

        <div class="mt-4">
            <p class="text-muted">
                We're currently in a phase where we want as many users as possible to try our service. <br>
                Please start with <a href="/play">Playground</a> and we'd appreciate your <a href="/Feedback">feedback</a> afterwards. <br>
                Users who provide valuable feedback will receive a permanent free pass! <br>
                We're also offering a free 1-year premium membership campaign limited to 33 users for our <a href="/Pricing">paid plans</a>!<br>
            </p>
        </div>
    </div>
</div>

@code {
    [Inject]
    public required NavigationManager NavigationManager { get; set; }

    [Inject]
    public required AuthenticationStateProvider AuthenticationStateProvider { get; set; }

    public const string Url = "https://pine-tree.site";
    public const string Title = "Pinetree";
    public const string Description = "Pinetree is a browser-based hierarchical markdown editor.Inspired by Amazon's One-Pager culture, Pinetree helps you create concise documents that everyone actually wants to read. While a one-page summary is ideal, sometimes details matter too.";

#if !DEBUG
    protected override async Task OnInitializedAsync()
    {
        await NavigateUserListIfAuthUser();
    }
#else
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await NavigateUserListIfAuthUser();
        }
    }
#endif
    private async Task NavigateUserListIfAuthUser()
    {
        var identity = await AuthenticationStateProvider.GetIdentityAsync();
        if (identity != null && identity.IsAuthenticated)
        {
            NavigationManager.NavigateTo($"/User");
        }
    }
}