@page "/Tryit"

@using Pinetree.Data
@using Pinetree.Model
@using Microsoft.AspNetCore.Components.Server.ProtectedBrowserStorage
@using Pinetree.Components.Components
@using Pinetree.Components.Services

@inject NavigationManager Navigation
@inject ProtectedLocalStorage ProtectedLocalStore
@inject ApplicationDbContext DbContext

@rendermode InteractiveServer

@if (PineTree != null)
{
    <Markdown UserName="@(UserName)" PineTree="@(PineTree)" Id="@(Id)" IsTry="@(true)" FileCount=@FileCount />
}

@code {
    [Parameter]
    public string UserName { get; set; } = "";

    [Parameter]
    public long Id { get; set; }

    private PineTree? PineTree { get; set; }
    private int FileCount { get; set; }

    protected override void OnInitialized()
    {
        PineTree = new PineTree(0, "Untitled", "", null, -1);
        FileCount = 1;
    }
}
